#!/bin/sh
#
#    os_logo: Get the logo of the operating system. Base on byobu script but 
#             with less distro (for now) and additionnal system (FreeBSD, â€¦)
#
#    Authors: Vincent Demeester <vincent@demeester.fr>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, version 3 of the License.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
color 2>/dev/null || color() { true; }

print_logo() {
    distro=`echo "$1" | sed 'y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/' `
    case "$distro" in
        *debian*)
            logo=" @ "
            $MARKUP && printf "$(color w r)%s$(color -)" "$logo" || printf "$logo"
        ;;
        *ubuntu*)
            $MARKUP && printf "$(color m W)%s$(color -)" " U " || printf "\\o/"
        ;;
        *altlinux*)
            logo="alt"
            $MARKUP && printf "$(color Y k)%s$(color -)" "$logo" || printf "$logo"
        ;;
        *arch*)
            logo=" A "
            $MARKUP && printf "$(color b w b)%s$(color -)" "$logo" || printf "$logo"
        ;;
        *fedora*)
            logo=" f "
            $MARKUP && printf "$(color b w)%s$(color -)" "$logo" || printf "$logo"
        ;;
        *gentoo*)
            logo=" > "
            $MARKUP && printf "$(color b c w)%s$(color -)" "$logo" || printf "$logo"
        ;;
        *slackware*)
            logo=".S "
            $MARKUP && printf "$(color u B k)%s$(color -)" "$logo" || printf "$logo"
        ;;
        *suse*)
            logo="SuSE"
            $MARKUP && printf "$(color W g)%s$(color -)" "$logo" || printf "$logo"
        ;;
        *)
            logo="[B]"
            $MARKUP && printf "$(color b k W)%s$(color -)" "$logo" || printf " $logo "
        ;;
    esac
}

if [ -r "/etc/issue" ]; then
	# Otherwise, check /etc/issue
	distro=`grep -m1 "^[A-Za-z]" /etc/issue`
	print_logo "$distro" && exit 0 || true
fi
