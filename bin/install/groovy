#!/usr/bin/env sh
# Groovy installer
# Arguments : version mirrors
. $HOME/bin/install/common.sh

version=$1
shift

if test -z "$1"; then
    # default mirror
    mirror="http://dist.groovy.codehaus.org/distributions"
else
    mirror="$1"
fi
echo "Installing groovy"
echo "Checking groovy version ${version}..."
url="${mirror}/groovy-binary-${version}.zip"
output="/tmp/groovy-binary-${version}.zip"
download_file $url $output

echo "Extracting groovy $version..."
unzip $output -d $HOME/lib/

link_lib "groovy" $version

link_binary "groovy" "groovy" $version
link_binary "groovy" "grape" $version
link_binary "groovy" "groovyc" $version
link_binary "groovy" "groovyConsole" $version
link_binary "groovy" "groovydoc" $version
link_binary "groovy" "groovysh" $version
link_binary "groovy" "java2groovy" $version

echo "Cleaning downloaded file..."
rm $output
